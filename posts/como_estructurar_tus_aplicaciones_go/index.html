<!DOCTYPE html>
<html lang="es-ES">
    



<head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.56.0" />

    
    
    

<title>¿Cómo estructurar tus proyectos en Go? • Blog | Friends of GO</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="¿Cómo estructurar tus proyectos en Go?"/>
<meta name="twitter:description" content="¿Cuántas veces has empezado un nuevo proyecto en Go y te han surgido dudas sobre cómo organizar tú código? Por suerte, o por desgracia, la mayoría de los que estamos metidos en esto venimos de entornos como Java, PHP o C#, dónde el uso de namespaces está extendido como una práctica habitual. Sin embargo, cuándo uno empieza a programar en Go y descubre cómo funciona su sistema de paquetes, tiende a quedarse bloqueado."/>

<meta property="og:title" content="¿Cómo estructurar tus proyectos en Go?" />
<meta property="og:description" content="¿Cuántas veces has empezado un nuevo proyecto en Go y te han surgido dudas sobre cómo organizar tú código? Por suerte, o por desgracia, la mayoría de los que estamos metidos en esto venimos de entornos como Java, PHP o C#, dónde el uso de namespaces está extendido como una práctica habitual. Sin embargo, cuándo uno empieza a programar en Go y descubre cómo funciona su sistema de paquetes, tiende a quedarse bloqueado." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.friendsofgo.tech/posts/como_estructurar_tus_aplicaciones_go/" />
<meta property="article:published_time" content="2019-04-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-04-08T00:00:00+00:00" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.6a83d62c39a364f036df4db1ecd564645635d6c7fc182425cb501218fec485f5.css">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" media="print">



    <link rel="stylesheet" href="/css/custom.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="shortcut icon" href="/favicon.ico">
    
    

</head>


    <body class="theme-base-0d ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      
      
      
      
      
      <div class="author-image">
        <a href="https://blog.friendsofgo.tech/">
          <img src="https://blog.friendsofgo.tech//img/logo.png" alt="Author Image" class=" img--headshot element--center">
        </a>
      </div>
      
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Blog | Friends of GO</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/">
						<span>Inicio</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://friendsofgo.tech">
						<span>Web</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/newsletter/">
						<span>Newsletter</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/FriendsOfGoTech" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/friendsofgo" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	
	
	<a href="mailto:contact@friendsofgo.tech" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2019 Friends of GO
  
  
  <a href="/privacidad">Privacidad</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
<article>
  <header>
    <h1>¿Cómo estructurar tus proyectos en Go?</h1>
    
    
<div class="post__meta">
  
  
  
  <i class="fas fa-user-alt"></i> <a href="/authors/jlopez">Joan López de la Franca</a>
  
  
  
  <i class="fas fa-calendar-alt"></i> 8 Apr, 2019
  
  
  
  
  
  in
  
  
  <a class="badge badge-category" href="/categories/arquitectura">ARQUITECTURA</a>
  
  
  
  
  
  
  
  
  <br />
   <i class="fas fa-tags"></i>
  
  <a class="badge badge-tag" href="/tags/go">go</a>
   
  
  <a class="badge badge-tag" href="/tags/golang">golang</a>
   
  
  <a class="badge badge-tag" href="/tags/friends-of-go">friends of go</a>
   
  
  <a class="badge badge-tag" href="/tags/convention">convention</a>
   
  
  <a class="badge badge-tag" href="/tags/architecture">architecture</a>
   
  
  <a class="badge badge-tag" href="/tags/directory-structure">directory structure</a>
  
  
  
  
  <br />
  <i class="fas fa-clock"></i> 6 min read
</div>


  </header>
  
  
  <div class="post">
    

<p><strong>¿Cuántas veces has empezado un nuevo proyecto en Go y te han surgido dudas sobre cómo organizar tú código?</strong>
Por suerte, o por desgracia, la mayoría de los que estamos metidos en esto venimos de entornos como Java, PHP o C#,
dónde el uso de <em>namespaces</em> está extendido como una práctica habitual.
Sin embargo, cuándo uno empieza a programar en Go y descubre cómo funciona su sistema de paquetes, tiende a quedarse bloqueado.
Al fin y al cabo, no debemos olvidar que Go es un lenguaje que lleva la simplicidad al extremo.</p>

<h2 id="echando-un-vistazo-a-la-comunidad">Echando un vistazo a la comunidad</h2>

<p>Por suerte, a día de hoy ya podemos considerar que la comunidad de Go es suficientemente grande como ser tomada como referencia.
<a href="https://github.com/kubernetes/kubernetes">Kubernetes</a>, <a href="https://github.com/moby/moby">Moby</a>, <a href="https://github.com/cockroachdb/cockroach">CockroachDB</a>,
<a href="https://github.com/gorilla/mux">Gorilla Mux</a>, <a href="https://github.com/hashicorp/packer">Packer</a>, entre otros, <strong>son proyectos con la madurez necesaria
para ser tomados como ejemplo a la hora de estructurar nuestras aplicaciones.</strong> Más allá de simples <em>Hola Mundo</em> o proyectos personales, estos
tienen un gran bagaje en entornos de producción con altas cargas. Asi que, echemos un vistazo a ver qué conclusiones podemos sacar de estos proyectos.</p>

<p>En primer lugar, si nos centramos en <strong>librerías</strong>, pensadas para ser usadas como paquetes (las dependencias de toda la vida), como, por ejemplo, las típicas
de <a href="http://www.gorillatoolkit.org/">Gorilla</a> (<a href="https://github.com/gorilla/websocket">websocket</a>, <a href="https://github.com/gorilla/mux">mux</a>, etc), podemos ver que
están <strong>estructuradas como un solo paquete</strong>. Lo que significa que tendremos nuestra librería desglosada en diferentes ficheros (que se corresponderán
con cada uno de los componentes de nuestra librería), pero todos estarán en el directorio raíz y formarán parte del mismo paquete (<code>package</code>).</p>

<p>En segundo lugar, <strong>podemos ver como en proyectos más complejos, tipo aplicaciones,</strong> como lo es <a href="https://www.packer.io/">Packer</a> de <a href="https://www.hashicorp.com/">HashiCorp</a>,
<strong>se sigue una estructura multinivel,</strong> similar a la que se sigue en otros lenguajes. De forma que, tenemos una primera estructura de directorios que representa
cada uno de los componentes de nuestra aplicación, y luego, en cada directorio, tenemos, o bien ya código Go, o bien un segundo nivel de carpetas, que representa
cada uno de los subcomponentes que componen el componente padre.</p>

<p>Los que ya lleven un tiempo peleándose con los paquetes de Go, <strong>seguramente pensarán que esta opción no es muy aconsejable. Sin embargo, si recurrimos
al <em>core</em> del lenguaje, nos encontramos con algo parecido,</strong> como lo son los paquetes agrupados. Véase <code>&quot;net/http&quot;</code> o <code>&quot;crypto/md5&quot;</code>. Sea como sea,
no debemos olvidar que, cuándo procedamos a consumir dichos paquetes, el único nombre que figurará en nuestro código es el último de la cadena.
Por ejemplo <code>http.Client{}</code>.</p>

<p>En tercer y último lugar, podemos observar otro patrón habitual. <strong>El comúnmente denominado cómo <code>cmd</code> + <code>pkg</code>.</strong> Dónde, todo el código correspondiente
a los diferentes componentes de nuestra aplicación, iría dentro de la carpeta <code>pkg</code>, mientras que, el código correspondiente a los puntos de entrada
de nuestra aplicación (CLI, API, etc) iría en el directorio <code>cmd</code>. Incluso se puede llegar a ver una combinación de las dos últimas.</p>

<h2 id="reflexión-qué-tipo-de-proyecto-estás-construyendo">Reflexión: ¿Qué tipo de proyecto estás construyendo?</h2>

<p>Después de echar un vistazo por algunos de los proyectos escritos en Go más populares, nos podemos dar cuenta que no hemos sacado mucho en claro.
Sin embargo, parece que sí hemos llegado a una conclusión. Antes de plantearnos cómo estructurar nuestras aplicaciones, debemos pensar bien
la respuesta a la siguiente pregunta:</p>

<p><strong>- ¿Qué tipo de proyecto vamos a construir?</strong></p>

<p>Ante esta cuestión, tenemos varias posibles respuestas. Alguna de ellas ya la hemos anticipado anteriormente:</p>

<ul>
<li><p>¿Quizás una librería que funcionará por si sola y será usada como dependencia en otras aplicaciones?</p>
<div class="highlight"><pre class="chroma"><code class="language-Véase una librería para la gestión de protocol buffers.```" data-lang="Véase una librería para la gestión de protocol buffers.```">- ¿Quizás una aplicación que funcionará estrictamente como tal, sin tener funcionalidades exportadas como librerías?
    </code></pre></div>
<p>Véase una aplicación que expondrá una API REST de nuestro negocio.```</p></li>

<li><p>¿Quizás una aplicación, que además también tendrá funcionalidades expuestas como paquetes?</p>
<div class="highlight"><pre class="chroma"><code class="language-Véase una aplicación CLI de transformación de imágenes que también se podrá usar como librería en otros desarrollos.```" data-lang="Véase una aplicación CLI de transformación de imágenes que también se podrá usar como librería en otros desarrollos.```">   
Como vemos, las posibles respuestas a dicha pregunta, son varias, sin embargo, parece que **la mayor duda surge cuándo estamos dispuestos
a construir una aplicación grande y compleja,** no cuándo vamos a desarrollar una &#34;simple&#34; librería. Pues, en ese último caso, 
como ya adelantemos anteriormente, lo que haremos será tener un único paquete con varios ficheros.

## ¿Cómo estructurar tus **aplicaciones** en Go?

Como hemos visto, parece que, a pesar de que hay decisiones ya estandarizadas, aún no hay ningún enfoque que se haya convertido en el referente absoluto.
Es por eso que, **desde [Friends of Go](https://friendsofgo.tech), queremos hacer nuestra propuesta sobre como estructurar vuestras aplicaciones en Go.**
Por su puesto, ésta no es más que una confluencia de varias de las estrategias que ya se siguen hoy día en la comunidad. Ya tenemos suficiente con mojarnos y
dar nuestra opinión al respecto, solo nos faltaba decir que, además, la hemos inventado nosotros, lo cuál no sería verdad.

Entonces, ¿qué proponemos? Veamos!</code></pre></div></li>
</ul>

<p>your-application-name
├── cmd
|   ├── your-application-name-cli
|   |    └── main.go
|   ├── your-application-name-api
|   |    └── main.go
├── internal/
|   ├── package01
|   |    ├── file01.go
|   |    └── file02.go
|   ├── package02
|   |    ├── file01.go
|   |    └── file02.go
├── pkg/
|   ├── library01
|   |    ├── file01.go
|   |    └── file02.go
|   ├── library02
|   |    ├── file01.go
|   |    └── file02.go
├── vendor/
├── LICENSE
└── README.md
```</p>

<p>Dónde cada carpeta (o estructura de carpetas), tendría su finalidad:</p>

<ul>
<li><p><strong><code>/cmd</code></strong>, será la carpeta que va a contener todos los puntos de entrada de nuestra aplicación. Cada uno de ellos, será un paquete
de la carpeta <code>cmd</code> y cada uno tendrá su <code>main.go</code> además del resto de código necesario (configuraciones, entornos, inyección de dependencias, etc).
Es importante recordar que, los paquetes dentro de <code>cmd</code> se corresponderán con el nombre de los puntos de entrada, es decir, con el
nombre de los binarios de las aplicaciones correspondientes.</p></li>

<li><p><strong><code>/internal</code></strong>, será la carpeta que va a contener todos los paquetes que representan los componentes de nuestra aplicación, que no serán expuestos
y que no van a tener por qué funcionar fuera de ella.</p></li>

<li><p><strong><code>/pkg</code></strong>, será la carpeta que va a contener todos aquellos componentes de nuestra aplicación que sí queremos exponer, y que van a tener que
poder funcionar fuera de ella (reutilización).</p></li>

<li><p><strong><code>/vendor</code></strong>, (opcional) será la carpeta que va a contener todas las dependencias de terceros en caso de que aún no hayamos <a href="/posts/migrar-a-go-modules-facilmente/">migrado
a Go Modules</a> o que aún sigamos una estrategia de <em>vendoring</em>.</p></li>
</ul>

<p>Como podemos ver, ésta estrategia nos permite cubrir los distintos casos planteados anteriormente, pero no solo eso, sinó que además, estamos
indicando, con nuestra estructura de carpetas, qué paquetes van a ser expuestos y cuáles no, de forma fácil e intuitiva. Sobretodo, si tenemos en cuenta
que los paquetes dentro del directorio <code>internal</code> directamente no van a poder ser importados desde fuera de nuestro proyecto (por defecto).</p>

<h2 id="kit-el-shared-kernel-más-gopher">Kit, el <em>Shared Kernel</em> más <em>gopher</em></h2>

<p>Cuándo hablamos de <a href="https://es.wikipedia.org/wiki/Dise%C3%B1o_guiado_por_el_dominio">Domain-Driven Design (DDD)</a>, es habitual hablar
del concepto <em>Shared Kernel</em>, el cuál hace referencia a todo el conjunto de tipos de datos y funciones asociadas que son compartidas
por los diferentes contextos de nuestro dominio.</p>

<p>En la comunidad Go, los compañeros de <a href="https://www.ardanlabs.com/">ArdanLabs</a> proponen lo que ellos han llamado <strong>Kit</strong>.
Concepto con el que queremos cerrar éste artículo.</p>

<p>Según su definición, <strong>Kit</strong> debería ser el proyecto que representa la biblioteca estándar de tu organización, y ésta debería ser única.
Es por eso, que los paquetes que formen parte de la misma, deben diseñarse teniendo especial cuidado con la portabilidad de los mismos.
Los paquetes dentro de Kit deberían poder ser utilizados en múltiples aplicaciones y proporcionar un dominio de funcionalidad específico.
<strong>Recordad, menos <code>utils</code>, <code>common</code> y <code>shared</code> y más <code>time</code>, <code>strings</code> y <code>crypto</code>.</strong></p>

<p><br/></p>

<p>Finalmente, os queremos preguntar: <strong>¿Cuál es vuestra opinión al respecto?</strong></p>

<p>Como siempre, estaremos encantados de recibir vuestro <em>feedback</em> en los comentarios del blog o vía <a href="https://twitter.com/FriendsofGOTech">Twitter</a>.</p>

  </div>
  


<div class="about-the-author" id="about-the-author">
  
  <div class="left-column">
    <img class="profile-pic" src="https://res.cloudinary.com/fogo/image/upload/v1548598049/fogo/authors/jlopez.png" alt="Joan López de la Franca">
  </div>
  
  <div class="main-content">
    <h4>Joan López de la Franca</h4>
    <p>Software Engineer @ Atrapalo and Co-founder of Friends of Go</p>
    <p class="social-author">
      
      <a href="http://twitter.com/joanjan14" target="_blank" rel="noopener">
        <img alt="twitter" class="icon-img" height="22" width="22"
          src="https://res.cloudinary.com/practicaldev/image/upload/v1456342401/twitter-logo-silhouette_1_letrqc.png">
        joanjan14
      </a>
      
      
      <a href="http://github.com/joanlopez" target="_blank" rel="noopener">
        <img alt="github" class="icon-img" height="22" width="22"
          src="https://res.cloudinary.com/practicaldev/image/upload/v1456342401/github-logo_m841aq.png">
        joanlopez
      </a>
      
    </p>
  </div>
</div>


  

<div class="navigation navigation-single">
    
    <a href="/posts/es_go_un_lenguaje_orientado_a_objetos/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">¿Es Go un lenguaje orientado a objetos?</span>
    </a>
    
    
    <a href="/posts/orientacion_a_objetos_structs/" class="navigation-next">
      <span class="navigation-tittle">Orientación a Objetos: Structs</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <div id="graphcomment"></div>
<script type="text/javascript">
  window.graphcomment_id = 'friends-of-go';
   
  (function() {
    var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
    gc.src = 'https://graphcomment.com/js/integration.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
  })();
</script>
    


</article>


        </div>
        

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131289398-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    







<link rel="stylesheet" type="text/css"
    href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
    window.addEventListener("load", function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#161616",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#73d7e2",
                    "text": "#ffffff"
                }
            },
            "content": {
                "message": "Utilizamos cookies de terceros para generar estadísticas de audiencia analizando tu navegación. Si sigues navegando estarás aceptando su uso",
                "dismiss": "Acepto",
                "link": "Más información",
                "href": "/privacidad"
            }
        })
    });
</script>


    </body>
</html>
